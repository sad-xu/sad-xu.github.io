<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>025-复杂链表的复制 | Sansen Sekai</title>
    <meta name="description" content="三千世界, 学无止境">
    <link rel="shortcut icon" type="image/x-icon" href="./public/sad-me.png">
    
    <link rel="preload" href="/assets/css/0.styles.56fe4379.css" as="style"><link rel="preload" href="/assets/js/app.3b644823.js" as="script"><link rel="preload" href="/assets/js/2.e997199f.js" as="script"><link rel="preload" href="/assets/js/12.8248456d.js" as="script"><link rel="prefetch" href="/assets/js/10.5ee0a82c.js"><link rel="prefetch" href="/assets/js/11.daee2873.js"><link rel="prefetch" href="/assets/js/13.54a5dd4a.js"><link rel="prefetch" href="/assets/js/14.b823f735.js"><link rel="prefetch" href="/assets/js/15.d3b5d7cb.js"><link rel="prefetch" href="/assets/js/16.be4ba155.js"><link rel="prefetch" href="/assets/js/17.c61f081b.js"><link rel="prefetch" href="/assets/js/18.27973658.js"><link rel="prefetch" href="/assets/js/19.12894926.js"><link rel="prefetch" href="/assets/js/20.b2251d91.js"><link rel="prefetch" href="/assets/js/21.9368ff97.js"><link rel="prefetch" href="/assets/js/22.c5dd3b56.js"><link rel="prefetch" href="/assets/js/23.823a011e.js"><link rel="prefetch" href="/assets/js/24.133dc402.js"><link rel="prefetch" href="/assets/js/25.908d76af.js"><link rel="prefetch" href="/assets/js/26.50ae55c2.js"><link rel="prefetch" href="/assets/js/27.4d3bdc40.js"><link rel="prefetch" href="/assets/js/28.1910ec53.js"><link rel="prefetch" href="/assets/js/29.ae3971d2.js"><link rel="prefetch" href="/assets/js/3.8119daf4.js"><link rel="prefetch" href="/assets/js/30.a266a056.js"><link rel="prefetch" href="/assets/js/31.6e1332a3.js"><link rel="prefetch" href="/assets/js/32.d43f6148.js"><link rel="prefetch" href="/assets/js/33.9f60066d.js"><link rel="prefetch" href="/assets/js/34.89e76bff.js"><link rel="prefetch" href="/assets/js/35.976d89b0.js"><link rel="prefetch" href="/assets/js/36.70cb64a6.js"><link rel="prefetch" href="/assets/js/37.5a73ef0e.js"><link rel="prefetch" href="/assets/js/38.c74c2711.js"><link rel="prefetch" href="/assets/js/39.8e716e3c.js"><link rel="prefetch" href="/assets/js/4.5292c871.js"><link rel="prefetch" href="/assets/js/40.64191991.js"><link rel="prefetch" href="/assets/js/41.118c8402.js"><link rel="prefetch" href="/assets/js/42.7c764675.js"><link rel="prefetch" href="/assets/js/43.6cade1e6.js"><link rel="prefetch" href="/assets/js/44.615aeebf.js"><link rel="prefetch" href="/assets/js/45.acfd3be9.js"><link rel="prefetch" href="/assets/js/46.5e409128.js"><link rel="prefetch" href="/assets/js/5.69e3b9fc.js"><link rel="prefetch" href="/assets/js/6.36a28e4b.js"><link rel="prefetch" href="/assets/js/7.708932b7.js"><link rel="prefetch" href="/assets/js/8.288108ab.js"><link rel="prefetch" href="/assets/js/9.377be857.js">
    <link rel="stylesheet" href="/assets/css/0.styles.56fe4379.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Sansen Sekai</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/essay/" class="nav-link">技术杂文</a></div><div class="nav-item"><a href="/base/" class="nav-link">基础知识</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link router-link-active">算法解析</a></div><div class="nav-item"><a href="https://github.com/sad-xu" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/essay/" class="nav-link">技术杂文</a></div><div class="nav-item"><a href="/base/" class="nav-link">基础知识</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link router-link-active">算法解析</a></div><div class="nav-item"><a href="https://github.com/sad-xu" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/algorithm/" class="sidebar-link">算法解析</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>链表</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/algorithm/linked-list/003-从头到尾打印链表.html" class="sidebar-link">003-从尾到头打印链表</a></li><li><a href="/algorithm/linked-list/014-链表中倒数第k个结点.html" class="sidebar-link">014-链表中倒数第k个结点</a></li><li><a href="/algorithm/linked-list/015-反转链表.html" class="sidebar-link">015-反转链表</a></li><li><a href="/algorithm/linked-list/016-合并两个或k个有序链表.html" class="sidebar-link">016-合并两个或k个有序链表</a></li><li><a href="/algorithm/linked-list/025-复杂链表的复制.html" class="active sidebar-link">025-复杂链表的复制</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/algorithm/linked-list/025-复杂链表的复制.html#解法一" class="sidebar-link">解法一</a></li><li class="sidebar-sub-header"><a href="/algorithm/linked-list/025-复杂链表的复制.html#解法二" class="sidebar-link">解法二</a></li></ul></li><li><a href="/algorithm/linked-list/036-两个链表的第一个公共结点.html" class="sidebar-link">036-两个链表的第一个公共结点</a></li><li><a href="/algorithm/linked-list/055-链表中环的入口结点.html" class="sidebar-link">055-链表中环的入口结点</a></li><li><a href="/algorithm/linked-list/056-删除链表中重复的结点.html" class="sidebar-link">056-删除链表中重复的结点</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>栈和队列</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_025-复杂链表的复制"><a href="#_025-复杂链表的复制" class="header-anchor">#</a> 025-复杂链表的复制</h1> <p>输入一个复杂链表（每个节点中有节点值，以及两个指针，一个指向下一个节点，另一个特殊指针指向任意一个节点），返回结果为复制后复杂链表的head。（注意，输出结果中请不要返回参数中的节点引用，否则判题程序会直接返回空）</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/*
  function RandomListNode(x){
    this.label = x;
    this.next = null;
    this.random = null;
  }
*/</span>
<span class="token keyword">function</span> <span class="token function">Clone</span><span class="token punctuation">(</span><span class="token parameter">pHead</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  
<span class="token punctuation">}</span>
</code></pre></div><h2 id="解法一"><a href="#解法一" class="header-anchor">#</a> 解法一</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Clone</span><span class="token punctuation">(</span><span class="token parameter">pHead</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 1. 忽略特殊指针，复制节点 </span>
  <span class="token comment">// A -&gt; B -&gt; C</span>
  <span class="token comment">// A -&gt; a -&gt; B -&gt; b -&gt; C -&gt; c</span>
  <span class="token keyword">let</span> currentNode <span class="token operator">=</span> pHead
  <span class="token keyword">while</span> <span class="token punctuation">(</span>currentNode <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> nextNode <span class="token operator">=</span> currentNode<span class="token punctuation">.</span>next
    <span class="token keyword">let</span> cloneNode <span class="token operator">=</span> <span class="token punctuation">{</span>
      label<span class="token punctuation">:</span> currentNode<span class="token punctuation">.</span>label<span class="token punctuation">,</span>
      next<span class="token punctuation">:</span> nextNode<span class="token punctuation">,</span>
      random<span class="token punctuation">:</span> <span class="token keyword">null</span>
    <span class="token punctuation">}</span>
    currentNode<span class="token punctuation">.</span>next <span class="token operator">=</span> cloneNode
    currentNode <span class="token operator">=</span> nextNode
  <span class="token punctuation">}</span>
  <span class="token comment">// 2. 复制特殊指针的指向</span>
  <span class="token comment">// A -&gt; C</span>
  <span class="token comment">// a -&gt; c</span>
  currentNode <span class="token operator">=</span> pHead
  <span class="token keyword">while</span> <span class="token punctuation">(</span>currentNode <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    currentNode<span class="token punctuation">.</span>next<span class="token punctuation">.</span>random <span class="token operator">=</span> currentNode<span class="token punctuation">.</span>random <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token punctuation">:</span> currentNode<span class="token punctuation">.</span>random<span class="token punctuation">.</span>next
    currentNode <span class="token operator">=</span> currentNode<span class="token punctuation">.</span>next<span class="token punctuation">.</span>next
  <span class="token punctuation">}</span>
  <span class="token comment">// 3. 分离链表</span>
  <span class="token comment">// A -&gt; B -&gt; C   a -&gt; b -&gt; c</span>
  currentNode <span class="token operator">=</span> pHead
  <span class="token keyword">let</span> pCloneHead <span class="token operator">=</span> currentNode<span class="token punctuation">.</span>next
  <span class="token keyword">while</span> <span class="token punctuation">(</span>currentNode <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> cloneNode <span class="token operator">=</span> currentNode<span class="token punctuation">.</span>next
    currentNode<span class="token punctuation">.</span>next <span class="token operator">=</span> cloneNode<span class="token punctuation">.</span>next
    cloneNode<span class="token punctuation">.</span>next <span class="token operator">=</span> cloneNode<span class="token punctuation">.</span>next <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token punctuation">:</span> cloneNode<span class="token punctuation">.</span>next<span class="token punctuation">.</span>next
    currentNode <span class="token operator">=</span> currentNode<span class="token punctuation">.</span>next
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> pCloneHead
<span class="token punctuation">}</span>
</code></pre></div><h2 id="解法二"><a href="#解法二" class="header-anchor">#</a> 解法二</h2></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">修改于:</span> <span class="time">10/5/2019, 2:34:34 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/algorithm/linked-list/016-合并两个或k个有序链表.html" class="prev">016-合并两个或k个有序链表</a></span> <span class="next"><a href="/algorithm/linked-list/036-两个链表的第一个公共结点.html">036-两个链表的第一个公共结点</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.3b644823.js" defer></script><script src="/assets/js/2.e997199f.js" defer></script><script src="/assets/js/12.8248456d.js" defer></script>
  </body>
</html>
